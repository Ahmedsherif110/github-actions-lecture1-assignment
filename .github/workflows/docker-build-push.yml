name: docker-build-push

on:
    push: 
        branches: 
            - main
jobs:
    docker:
        runs-on: ubuntu-latest
    
        steps:
            - name: checkout repository 
              uses: actions/checkout@v4

            - name: login in to Docker hub
              uses: docker/login-action@v3
              with:
                username: ${{ vars.DOCKER_USERNAME }}
                password: ${{secrets.DOCKER_PASSWORD }}
            
            - name:  Build and push Docker image
              uses:  docker/build-push-action@v6
              with:
                context: ./home/rkha/Desktop/github-actions-lecture1-assignment/.github/workflows/Dockerfile
                push: true
                tags: |
                  docker.io/${{ vars.DOCKER_USERNAME }}/myapp:latest
                  docker.io/${{ vars.DOCKER_USERNAME }}/myapp:${{ github.sha }}